(()=>{var nt=Math.min,_=Math.max,K=Math.round;var N=t=>({x:t,y:t}),Wt={left:"right",right:"left",bottom:"top",top:"bottom"},_t={start:"end",end:"start"};function ft(t,e){return typeof t=="function"?t(e):t}function X(t){return t.split("-")[0]}function ot(t){return t.split("-")[1]}function gt(t){return t==="x"?"y":"x"}function ut(t){return t==="y"?"height":"width"}function J(t){return["top","bottom"].includes(X(t))?"y":"x"}function dt(t){return gt(J(t))}function pt(t,e,o){o===void 0&&(o=!1);let n=ot(t),i=dt(t),s=ut(i),r=i==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=Y(r)),[r,Y(r)]}function xt(t){let e=Y(t);return[et(t),e,et(e)]}function et(t){return t.replace(/start|end/g,e=>_t[e])}function jt(t,e,o){let n=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return o?e?i:n:e?n:i;case"left":case"right":return e?s:r;default:return[]}}function wt(t,e,o,n){let i=ot(t),s=jt(X(t),o==="start",n);return i&&(s=s.map(r=>r+"-"+i),e&&(s=s.concat(s.map(et)))),s}function Y(t){return t.replace(/left|right|bottom|top/g,e=>Wt[e])}function Ut(t){return{top:0,right:0,bottom:0,left:0,...t}}function yt(t){return typeof t!="number"?Ut(t):{top:t,right:t,bottom:t,left:t}}function j(t){let{x:e,y:o,width:n,height:i}=t;return{width:n,height:i,top:o,left:e,right:e+n,bottom:o+i,x:e,y:o}}function vt(t,e,o){let{reference:n,floating:i}=t,s=J(e),r=dt(e),a=ut(r),d=X(e),m=s==="y",h=n.x+n.width/2-i.width/2,g=n.y+n.height/2-i.height/2,w=n[a]/2-i[a]/2,p;switch(d){case"top":p={x:h,y:n.y-i.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:g};break;case"left":p={x:n.x-i.width,y:g};break;default:p={x:n.x,y:n.y}}switch(ot(e)){case"start":p[r]-=w*(o&&m?-1:1);break;case"end":p[r]+=w*(o&&m?-1:1);break}return p}var bt=async(t,e,o)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:r}=o,a=s.filter(Boolean),d=await(r.isRTL==null?void 0:r.isRTL(e)),m=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:g}=vt(m,n,d),w=n,p={},O=0;for(let b=0;b<a.length;b++){let{name:L,fn:E}=a[b],{x:D,y:S,data:T,reset:A}=await E({x:h,y:g,initialPlacement:n,placement:w,strategy:i,middlewareData:p,rects:m,platform:r,elements:{reference:t,floating:e}});h=D??h,g=S??g,p={...p,[L]:{...p[L],...T}},A&&O<=50&&(O++,typeof A=="object"&&(A.placement&&(w=A.placement),A.rects&&(m=A.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:h,y:g}=vt(m,w,d)),b=-1)}return{x:h,y:g,placement:w,strategy:i,middlewareData:p}};async function At(t,e){var o;e===void 0&&(e={});let{x:n,y:i,platform:s,rects:r,elements:a,strategy:d}=t,{boundary:m="clippingAncestors",rootBoundary:h="viewport",elementContext:g="floating",altBoundary:w=!1,padding:p=0}=ft(e,t),O=yt(p),L=a[w?g==="floating"?"reference":"floating":g],E=j(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(L)))==null||o?L:L.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:m,rootBoundary:h,strategy:d})),D=g==="floating"?{x:n,y:i,width:r.floating.width,height:r.floating.height}:r.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},A=j(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:D,offsetParent:S,strategy:d}):D);return{top:(E.top-A.top+O.top)/T.y,bottom:(A.bottom-E.bottom+O.bottom)/T.y,left:(E.left-A.left+O.left)/T.x,right:(A.right-E.right+O.right)/T.x}}var Ot=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o,n;let{placement:i,middlewareData:s,rects:r,initialPlacement:a,platform:d,elements:m}=e,{mainAxis:h=!0,crossAxis:g=!0,fallbackPlacements:w,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:b=!0,...L}=ft(t,e);if((o=s.arrow)!=null&&o.alignmentOffset)return{};let E=X(i),D=J(a),S=X(a)===a,T=await(d.isRTL==null?void 0:d.isRTL(m.floating)),A=w||(S||!b?[Y(a)]:xt(a)),at=O!=="none";!w&&at&&A.push(...wt(a,b,O,T));let c=[a,...A],l=await At(e,L),f=[],u=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&f.push(l[E]),g){let R=pt(i,r,T);f.push(l[R[0]],l[R[1]])}if(u=[...u,{placement:i,overflows:f}],!f.every(R=>R<=0)){var v,y;let R=(((v=s.flip)==null?void 0:v.index)||0)+1,F=c[R];if(F)return{data:{index:R,overflows:u},reset:{placement:F}};let z=(y=u.filter(I=>I.overflows[0]<=0).sort((I,H)=>I.overflows[1]-H.overflows[1])[0])==null?void 0:y.placement;if(!z)switch(p){case"bestFit":{var x;let I=(x=u.filter(H=>{if(at){let W=J(H.placement);return W===D||W==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(W=>W>0).reduce((W,Ht)=>W+Ht,0)]).sort((H,W)=>H[1]-W[1])[0])==null?void 0:x[0];I&&(z=I);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function st(){return typeof window<"u"}function U(t){return Et(t)?(t.nodeName||"").toLowerCase():"#document"}function C(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function M(t){var e;return(e=(Et(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Et(t){return st()?t instanceof Node||t instanceof C(t).Node:!1}function P(t){return st()?t instanceof Element||t instanceof C(t).Element:!1}function B(t){return st()?t instanceof HTMLElement||t instanceof C(t).HTMLElement:!1}function Lt(t){return!st()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof C(t).ShadowRoot}function q(t){let{overflow:e,overflowX:o,overflowY:n,display:i}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function St(t){return["table","td","th"].includes(U(t))}function Z(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function rt(t){let e=ct(),o=P(t)?k(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>o[n]?o[n]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!e&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!e&&(o.filter?o.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function Rt(t){let e=$(t);for(;B(e)&&!V(e);){if(rt(e))return e;if(Z(e))return null;e=$(e)}return null}function ct(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function V(t){return["html","body","#document"].includes(U(t))}function k(t){return C(t).getComputedStyle(t)}function Q(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $(t){if(U(t)==="html")return t;let e=t.assignedSlot||t.parentNode||Lt(t)&&t.host||M(t);return Lt(e)?e.host:e}function Ct(t){let e=$(t);return V(e)?t.ownerDocument?t.ownerDocument.body:t.body:B(e)&&q(e)?e:Ct(e)}function it(t,e,o){var n;e===void 0&&(e=[]),o===void 0&&(o=!0);let i=Ct(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),r=C(i);if(s){let a=lt(r);return e.concat(r,r.visualViewport||[],q(i)?i:[],a&&o?it(a):[])}return e.concat(i,it(i,[],o))}function lt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Pt(t){let e=k(t),o=parseFloat(e.width)||0,n=parseFloat(e.height)||0,i=B(t),s=i?t.offsetWidth:o,r=i?t.offsetHeight:n,a=K(o)!==s||K(n)!==r;return a&&(o=s,n=r),{width:o,height:n,$:a}}function kt(t){return P(t)?t:t.contextElement}function G(t){let e=kt(t);if(!B(e))return N(1);let o=e.getBoundingClientRect(),{width:n,height:i,$:s}=Pt(e),r=(s?K(o.width):o.width)/n,a=(s?K(o.height):o.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}var Vt=N(0);function Ft(t){let e=C(t);return!ct()||!e.visualViewport?Vt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Xt(t,e,o){return e===void 0&&(e=!1),!o||e&&o!==C(t)?!1:e}function tt(t,e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);let i=t.getBoundingClientRect(),s=kt(t),r=N(1);e&&(n?P(n)&&(r=G(n)):r=G(t));let a=Xt(s,o,n)?Ft(s):N(0),d=(i.left+a.x)/r.x,m=(i.top+a.y)/r.y,h=i.width/r.x,g=i.height/r.y;if(s){let w=C(s),p=n&&P(n)?C(n):n,O=w,b=lt(O);for(;b&&n&&p!==O;){let L=G(b),E=b.getBoundingClientRect(),D=k(b),S=E.left+(b.clientLeft+parseFloat(D.paddingLeft))*L.x,T=E.top+(b.clientTop+parseFloat(D.paddingTop))*L.y;d*=L.x,m*=L.y,h*=L.x,g*=L.y,d+=S,m+=T,O=C(b),b=lt(O)}}return j({width:h,height:g,x:d,y:m})}function ht(t,e){let o=Q(t).scrollLeft;return e?e.left+o:tt(M(t)).left+o}function Nt(t,e,o){o===void 0&&(o=!1);let n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(o?0:ht(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function qt(t){let{elements:e,rect:o,offsetParent:n,strategy:i}=t,s=i==="fixed",r=M(n),a=e?Z(e.floating):!1;if(n===r||a&&s)return o;let d={scrollLeft:0,scrollTop:0},m=N(1),h=N(0),g=B(n);if((g||!g&&!s)&&((U(n)!=="body"||q(r))&&(d=Q(n)),B(n))){let p=tt(n);m=G(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}let w=r&&!g&&!s?Nt(r,d,!0):N(0);return{width:o.width*m.x,height:o.height*m.y,x:o.x*m.x-d.scrollLeft*m.x+h.x+w.x,y:o.y*m.y-d.scrollTop*m.y+h.y+w.y}}function Gt(t){return Array.from(t.getClientRects())}function Yt(t){let e=M(t),o=Q(t),n=t.ownerDocument.body,i=_(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=_(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight),r=-o.scrollLeft+ht(t),a=-o.scrollTop;return k(n).direction==="rtl"&&(r+=_(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:r,y:a}}function Kt(t,e){let o=C(t),n=M(t),i=o.visualViewport,s=n.clientWidth,r=n.clientHeight,a=0,d=0;if(i){s=i.width,r=i.height;let m=ct();(!m||m&&e==="fixed")&&(a=i.offsetLeft,d=i.offsetTop)}return{width:s,height:r,x:a,y:d}}function Jt(t,e){let o=tt(t,!0,e==="fixed"),n=o.top+t.clientTop,i=o.left+t.clientLeft,s=B(t)?G(t):N(1),r=t.clientWidth*s.x,a=t.clientHeight*s.y,d=i*s.x,m=n*s.y;return{width:r,height:a,x:d,y:m}}function Tt(t,e,o){let n;if(e==="viewport")n=Kt(t,o);else if(e==="document")n=Yt(M(t));else if(P(e))n=Jt(e,o);else{let i=Ft(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return j(n)}function Bt(t,e){let o=$(t);return o===e||!P(o)||V(o)?!1:k(o).position==="fixed"||Bt(o,e)}function Zt(t,e){let o=e.get(t);if(o)return o;let n=it(t,[],!1).filter(a=>P(a)&&U(a)!=="body"),i=null,s=k(t).position==="fixed",r=s?$(t):t;for(;P(r)&&!V(r);){let a=k(r),d=rt(r);!d&&a.position==="fixed"&&(i=null),(s?!d&&!i:!d&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||q(r)&&!d&&Bt(t,r))?n=n.filter(h=>h!==r):i=a,r=$(r)}return e.set(t,n),n}function Qt(t){let{element:e,boundary:o,rootBoundary:n,strategy:i}=t,r=[...o==="clippingAncestors"?Z(e)?[]:Zt(e,this._c):[].concat(o),n],a=r[0],d=r.reduce((m,h)=>{let g=Tt(e,h,i);return m.top=_(g.top,m.top),m.right=nt(g.right,m.right),m.bottom=nt(g.bottom,m.bottom),m.left=_(g.left,m.left),m},Tt(e,a,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function te(t){let{width:e,height:o}=Pt(t);return{width:e,height:o}}function ee(t,e,o){let n=B(e),i=M(e),s=o==="fixed",r=tt(t,!0,s,e),a={scrollLeft:0,scrollTop:0},d=N(0);if(n||!n&&!s)if((U(e)!=="body"||q(i))&&(a=Q(e)),n){let w=tt(e,!0,s,e);d.x=w.x+e.clientLeft,d.y=w.y+e.clientTop}else i&&(d.x=ht(i));let m=i&&!n&&!s?Nt(i,a):N(0),h=r.left+a.scrollLeft-d.x-m.x,g=r.top+a.scrollTop-d.y-m.y;return{x:h,y:g,width:r.width,height:r.height}}function mt(t){return k(t).position==="static"}function Dt(t,e){if(!B(t)||k(t).position==="fixed")return null;if(e)return e(t);let o=t.offsetParent;return M(t)===o&&(o=o.ownerDocument.body),o}function Mt(t,e){let o=C(t);if(Z(t))return o;if(!B(t)){let i=$(t);for(;i&&!V(i);){if(P(i)&&!mt(i))return i;i=$(i)}return o}let n=Dt(t,e);for(;n&&St(n)&&mt(n);)n=Dt(n,e);return n&&V(n)&&mt(n)&&!rt(n)?o:n||Rt(t)||o}var ne=async function(t){let e=this.getOffsetParent||Mt,o=this.getDimensions,n=await o(t.floating);return{reference:ee(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function oe(t){return k(t).direction==="rtl"}var ie={convertOffsetParentRelativeRectToViewportRelativeRect:qt,getDocumentElement:M,getClippingRect:Qt,getOffsetParent:Mt,getElementRects:ne,getClientRects:Gt,getDimensions:te,getScale:G,isElement:P,isRTL:oe};var It=Ot;var $t=(t,e,o)=>{let n=new Map,i={platform:ie,...o},s={...i.platform,_c:n};return bt(t,e,{...i,platform:s})};var zt={manifest_version:3,name:"\u898B\u51FA\u3057\u30C1\u30A7\u30C3\u30AB\u30FC",version:"1.0",description:"\u30CB\u30E5\u30FC\u30B9\u898B\u51FA\u3057\u306B\u30AB\u30FC\u30BD\u30EB\u3092\u5F53\u3066\u3066\u30DC\u30BF\u30F3\u3092\u62BC\u3059\u3068\u3001AI\u304C\u672C\u6587\u3092\u8AAD\u307F\u53D6\u308A\u6B63\u3057\u3044\u898B\u51FA\u3057\u3092\u63D0\u793A\u3059\u308B\u62E1\u5F35\u6A5F\u80FD\u3067\u3059\u3002",permissions:["scripting","activeTab"],host_permissions:["https://www.goo.ne.jp/*","https://news.yahoo.co.jp/*","https://news.goo.ne.jp/*"],content_scripts:[{matches:["https://*/*"],js:["content.js"]}],action:{default_popup:"loading/fishing-animation.html",default_icon:"hello_extensions.png"},background:{service_worker:"background.js"}};(function(){console.log("\u2705 content.js \u304C\u5B9F\u884C\u3055\u308C\u307E\u3057\u305F");let t=[];try{let c=zt.host_permissions;if(Array.isArray(c)&&c.length>0){let l=new URL(location.href).origin;if(c.some(f=>new URL(f).origin===l))t=c.map(f=>new URL(f).origin);else throw new Error("\u73FE\u5728\u306E BASE_URL \u304C host_permissions \u306B\u542B\u307E\u308C\u3066\u3044\u307E\u305B\u3093")}else throw new Error("host_permissions \u304C\u898B\u3064\u304B\u3089\u306A\u3044\u304B\u7A7A\u3067\u3059")}catch(c){console.error("\u26A0\uFE0F BASE_URLS \u306E\u8A2D\u5B9A\u306B\u5931\u6557\u3057\u307E\u3057\u305F:",c),t=["*"]}console.log(`\u{1F517} BASE_URLS: ${t.join(", ")}`);let e={DEFAULT:"default",CLOSE:"close",LOADING:"loading"},o=null,n=!1,i=-1,s=new Map,r=new Set;function a(){let c=document.createElement("span");return c.style.display="flex",c.style.width="60px",c.style.height="100%",c.style.backgroundImage="url('http://localhost:8000/static/fish.png')",c.style.backgroundSize="contain",c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="center",c.style.position="absolute",c.style.top="0",c.style.right="0",c.style.transform="translateX(-50%)",c.style.pointerEvents="none",c.style.zIndex="10",c.classList.add("moving-fish"),c}let d=document.createElement("style");d.innerHTML=`
@keyframes moveLeftRight {
  0% { transform: translateX(0); }
  50% { transform: translateX(-30px); }
  100% { transform: translateX(0); }
}
.moving-fish {
  animation: moveLeftRight 1s infinite ease-in-out;
}
`,document.head.appendChild(d);function m(c){}function h(c,l){let u={[e.DEFAULT]:{text:"\xA0",backgroundImage:"none",classAction:"remove"},[e.CLOSE]:{text:"\u2716",backgroundImage:"none",classAction:"remove"},[e.LOADING]:{text:"\xA0",classAction:"add",spanElement:'<span class="moving-fish" style="display: flex;width: 60px;height: 100%;background-image: url(&quot;http://localhost:8000/static/fish.png&quot;);background-size: contain;background-repeat: no-repeat;background-position: center center;position: absolute;top: 0px;right: 0px;transform: translateX(-50%);pointer-events: none;z-index: 10;"></span>'}}[l];if(!u)return;c.innerText=u.text,c.style.backgroundImage=u.backgroundImage,c.dataset.state=l,c.classList[u.classAction]("loading"),u.additionalStyles&&Object.assign(c.style,u.additionalStyles),u.spanElement&&(c.innerHTML+=u.spanElement),l===e.LOADING&&void 0;let v=c.dataset.url;if(v){let y=s.get(v)||{};s.set(v,{...y,state:l})}l===e.LOADING?r.add(c.dataset.url):r.delete(c.dataset.url)}function g(c,l){let f=document.createElement("button");Object.assign(f.style,{position:"absolute",backgroundColor:"rgba(74, 138, 87, 0.9)",color:"rgba(255, 255, 255, 0.8)",padding:"0",border:"2px solid rgba(102, 102, 102, 0.9)",borderRadius:"4px",fontSize:"14px",lineHeight:"1",height:`min(20px, ${l.offsetHeight}px, ${l.offsetWidth}px)`,width:`min(20px, ${l.offsetHeight}px, ${l.offsetWidth}px)`,zIndex:"1000",whiteSpace:"nowrap",cursor:"pointer",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"}),f.className="tooltip",f.innerText=c,f.dataset.popupButton="headline-check-open-popup-button";let u=w(l),v=l.querySelector("a")?.textContent.trim()||"\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F";if(f.dataset.url=u,u){let y=s.get(u);r.has(u)?h(f,e.LOADING):y&&y.state===e.CLOSE?h(f,e.CLOSE):h(f,e.DEFAULT)}else h(f,e.DEFAULT);return f.addEventListener("click",y=>p(y,v,f,l)),f.addEventListener("mouseenter",()=>n=!0),f.addEventListener("mouseleave",()=>O(f)),f}function w(c){if(c.tagName==="A")return c.href;let l=c.querySelector("a");if(l)return l.href;let f=c.closest("a");return f?f.href:null}function p(c,l,f,u){c.stopPropagation(),c.preventDefault();let v=f.dataset.url;if(!v){console.error("\u8A18\u4E8BURL\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002");return}if(f.dataset.state===e.CLOSE){L(u),h(f,e.DEFAULT);return}if(r.has(v)){console.log("\u26A0\uFE0F \u73FE\u5728\u30ED\u30FC\u30C7\u30A3\u30F3\u30B0\u4E2D\u3067\u3059\u3002");return}h(f,e.LOADING),b(v,u,l,f).finally(()=>{f.dataset.state===e.LOADING&&h(f,e.DEFAULT)})}function O(c){!n&&c.dataset.state!==e.LOADING?(S(c),o=null):n=!1}function b(c,l,f,u){return new Promise((v,y)=>{if(s.has(c)){let x=s.get(c);if(x&&x.data){E(x.data,l,u),h(u,e.CLOSE),v();return}}fetch("http://localhost:8000/headline",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c,original_headline:f})}).then(x=>{if(!x.ok)throw new Error(`HTTP\u30A8\u30E9\u30FC: ${x.status}`);return x.json()}).then(x=>{if(!x||typeof x!="object"||!x.headline)throw new Error("\u4E0D\u6B63\u306A\u30C7\u30FC\u30BF\u5F62\u5F0F\u304C\u8FD4\u3055\u308C\u307E\u3057\u305F");s.set(c,{data:x,state:e.CLOSE}),E(x,l,u),h(u,e.CLOSE),v()}).catch(x=>{console.error("\u26A0\uFE0F \u8A18\u4E8B\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",x),h(u,e.DEFAULT),y(x)})})}function L(c){let l=c.querySelector(".overlay");l&&l.remove();let f=w(c);if(f){let u=s.get(f)||{};s.set(f,{...u,state:e.DEFAULT})}}function E(c,l,f){if(!c||!c.headline){console.error("\u26A0\uFE0F \u30C7\u30FC\u30BF\u304C\u7121\u52B9\u3067\u3059\u3002",c);return}let u;if(u=l.closest("li"),!u&&(u=l.closest("a"),!u)){console.error("<a>\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002");return}let v=u.offsetWidth,y=l.querySelector("a")||l.closest("a"),x=y?getComputedStyle(y).fontSize:"14px",R=document.createElement("div");R.className="overlay",R.innerText=`\u{1F4A1} ${c.headline}`,Object.assign(R.style,{position:"absolute",bottom:"calc(100% + 4px)",left:"50%",transform:"translateX(-50%)",width:`${v}px`,backgroundColor:"rgba(255, 255, 255, 0.9)",color:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x,boxShadow:"rgba(0, 0, 0, 0.1) 0px 4px 6px,0 0 0 1px rgba(74, 138, 87, 0.9)",borderRadius:"8px",padding:"4px",zIndex:"1000",pointerEvents:"none",textAlign:"center","font-family":"BIZ UDPGothic"});let F=document.createElementNS("http://www.w3.org/2000/svg","svg");F.setAttribute("width","20"),F.setAttribute("height","10"),F.setAttribute("viewBox","0 0 20 10"),F.style.position="absolute",F.style.bottom="-10px",F.style.left="80%",F.style.transform="translateX(-80%)",F.style.zIndex="999";let z=document.createElement("div");Object.assign(z.style,{content:'""',position:"absolute",bottom:"-6px",left:"80%",transform:"translateX(-80%)",width:"0",height:"0",borderLeft:"80px solid transparent",borderRight:"50px solid transparent",borderTop:"6px solid rgba(74, 138, 87, 0.9)",zIndex:"999"});let I=document.createElement("div");Object.assign(I.style,{content:'""',position:"absolute",bottom:"-4px",left:"80%",transform:"translateX(-80%)",width:"0",height:"0",borderLeft:"80px solid transparent",borderRight:"50px solid transparent",borderTop:"4px solid rgba(230, 244, 234, 0.9)",zIndex:"1000"}),R.appendChild(z),R.appendChild(I),u.style.position="relative",u.appendChild(R),h(f,e.CLOSE)}function D(c,l){$t(c,l,{placement:"right",middleware:[It()]}).then(({x:f,y:u})=>{Object.assign(l.style,{left:`${f-20}px`,top:`${u}px`})})}function S(c){c&&c.parentNode&&c.parentNode.removeChild(c)}function T(c){let l=c.length;l!==i&&(console.log(`\u{1F7E1} \u898B\u51FA\u3057\u30EA\u30F3\u30AF\u6570\uFF1A${l} \u4EF6`),i=l)}function A(){let c=Array.from(document.querySelectorAll("ul > li, a")).filter(l=>{let f=l.querySelector("a");return f?t.includes("*")?!0:t.some(u=>f.href.startsWith(u)):!1});T(c),c.forEach(l=>{l.dataset.tooltipInitialized||(l.dataset.tooltipInitialized="true",l.addEventListener("mouseenter",()=>{let f="\xA0";o&&(S(o),o=null);let u=g(f,l);o=u,document.body.appendChild(u),D(l,u);let v=l.closest("li");v&&(v.style.overflow="visible");let y=null;if(l.tagName==="A")y=l.href;else if(l.querySelector("a"))y=l.querySelector("a").href;else{let x=l.closest("a");x&&(y=x.href)}y&&r.has(y)&&(h(u,e.DEFAULT),r.delete(y))}),l.addEventListener("mouseleave",()=>{!n&&o&&(S(o),o=null)}))})}new MutationObserver(c=>{c.forEach(l=>{if(l.type==="attributes"&&l.attributeName==="class"){let f=l.target;f.classList.contains("active")&&(console.log(`\u{1F7E2} Active\u30AF\u30E9\u30B9\u304C\u5909\u66F4\u3055\u308C\u307E\u3057\u305F: ${f.id}`),A())}l.type==="childList"&&l.addedNodes.length>0&&A()})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),A()})();})();
//# sourceMappingURL=content.js.map
